<div class="container">
    <div class="collection-page"
         *ngVar="(collectionRD$ | async) as collectionRD">
      <div *ngIf="collectionRD?.hasSucceeded" @fadeInOut>
        <div *ngIf="collectionRD?.payload as collection">
          <ds-view-tracker [object]="collection"></ds-view-tracker>
          <div class="d-flex flex-row border-bottom mb-4 pb-4">
            <header class="comcol-header mr-auto">
              <!-- Collection Name -->
              <ds-comcol-page-header
                  [name]="dsoNameService.getName(collection)">
              </ds-comcol-page-header>
              <!-- Collection logo -->
              <ds-comcol-page-logo *ngIf="logoRD$"
                                   [logo]="(logoRD$ | async)?.payload"
                                   [alternateText]="'collection.logo' | translate">
              </ds-comcol-page-logo>
  
              <!-- Internal Handle -->
              <div *ngIf="isCollectionAdmin$ | async">
                <div class="admin">
                  <ds-themed-comcol-page-handle
                      [content]="collection.handle"
                      [title]="'collection.page.handle.internal'">
                  </ds-themed-comcol-page-handle>
                </div>
              </div>
              <!-- Sistedes Handle -->
              <ds-themed-comcol-page-handle
                  [content]="getPermanentUri(collection)"
                  [title]="'collection.page.handle'">
              </ds-themed-comcol-page-handle>
              <!-- Introductory text -->
              <ds-comcol-page-content
                  [content]="collection.introductoryText"
                  [hasInnerHtml]="true">
              </ds-comcol-page-content>
              <!-- News -->
              <ds-comcol-page-content
                  [content]="collection.sidebarText"
                  [hasInnerHtml]="true"
                  [title]="'collection.page.news'">
              </ds-comcol-page-content>
              <!-- Report error -->
              <div class="mt-3">
                <span>
                  <div class="btn btn-outline-warning" role="button" routerLink="/info/feedback">
                    <i class="fa fa-exclamation-circle"></i> {{ "collection.page.report-error" | translate }}
                  </div>
                </span>
              </div>
            </header>
            <ds-dso-edit-menu></ds-dso-edit-menu>
          </div>
          <section class="comcol-page-browse-section">
            <!-- Browse-By Links -->
            <ds-themed-comcol-page-browse-by
                [id]="collection.id"
                [contentType]="collection.type">
            </ds-themed-comcol-page-browse-by>
  
            <router-outlet></router-outlet>
          </section>
          <footer *ngIf="collection.copyrightText" class="border-top my-5 pt-4">
            <!-- Copyright -->
            <ds-comcol-page-content
                [content]="collection.copyrightText"
                [hasInnerHtml]="true">
            </ds-comcol-page-content>
          </footer>
        </div>
      </div>
      <ds-error *ngIf="collectionRD?.hasFailed"
                message="{{'error.collection' | translate}}"></ds-error>
      <ds-themed-loading *ngIf="collectionRD?.isLoading"
                         message="{{'loading.collection' | translate}}"></ds-themed-loading>
    </div>
  </div>